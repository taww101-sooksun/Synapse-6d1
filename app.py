import streamlit as st
import os
import time

# 1. ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏≠‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£ (Theme)
st.set_page_config(page_title="BigBoss Studio - Full Power", layout="wide")

st.markdown("""
    <style>
    .stApp { background: linear-gradient(to bottom, #1a1a2e, #16213e); color: white; }
    .status-box { padding: 20px; border-radius: 15px; background: rgba(255,255,255,0.1); border: 1px solid #4ecca3; }
    </style>
    """, unsafe_allow_html=True)

# 2. ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
st.title("üöÄ BigBoss Studio: ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ö‡∏≥‡∏ö‡∏±‡∏î")
st.write("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á: **‡∏£‡∏±‡∏ô‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á (Local) - ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ API - ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥**")

# 3. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏•‡∏á
MUSIC_DIR = "my_music"
if not os.path.exists(MUSIC_DIR):
    os.makedirs(MUSIC_DIR)

# ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå
songs = [f for f in os.listdir(MUSIC_DIR) if f.endswith('.mp3')]

# 4. ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
col1, col2 = st.columns([6, 4])

with col1:
    st.subheader("üå≤ ‡∏â‡∏≤‡∏Å‡∏ó‡∏±‡∏®‡∏ô‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à")
    # ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏õ‡πà‡∏≤‡πÑ‡∏°‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å
    st.image("https://googleusercontent.com/image_generation_content/11", use_container_width=True)
    
    if songs:
        current_song = st.selectbox("üíø ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ö‡∏£‡∏£‡πÄ‡∏•‡∏á:", songs)
        audio_path = os.path.join(MUSIC_DIR, current_song)
        
        # ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á
        st.audio(audio_path)
        
        # ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Fade
        st.info("üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡πÄ‡∏û‡∏•‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£ Fade Out 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô")
    else:
        st.warning("‚ö†Ô∏è ‡∏ä‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå my_music ‡πÄ‡∏•‡∏¢")

with col2:
    st.subheader("üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö")
    with st.container():
        st.markdown('<div class="status-box">', unsafe_allow_html=True)
        st.write(f"üìÅ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {len(songs)} ‡πÄ‡∏û‡∏•‡∏á")
        
        # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏£‡πà‡∏≤‡∏ß‡πÜ
        total_size = sum(os.path.getsize(os.path.join(MUSIC_DIR, f)) for f in songs) / (1024*1024)
        st.write(f"üíæ ‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß: {total_size:.2f} MB")
        
        st.divider()
        st.write("‚öôÔ∏è **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏û‡∏•‡∏á (Transition)**")
        fade_val = st.slider("‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏á‡∏´‡∏≤‡∏¢ (Fade Out):", 0, 15, 10)
        st.write(f"‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô: **{fade_val} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (Decimal Smooth)**")
        st.markdown('</div>', unsafe_allow_html=True)

# 5. ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ñ‡∏≤‡∏∞‡∏£‡∏∞‡∏Ü‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏™‡∏ï‡∏¥ (432Hz Simulation)
st.divider()
if st.button("üîî ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏°‡∏î‡∏ö‡∏≥‡∏ö‡∏±‡∏î (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡∏Ü‡∏±‡∏á‡∏ô‡∏≥‡∏ó‡∏≤‡∏á)"):
    with st.spinner("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á..."):
        time.sleep(2)
        st.balloons()
        st.success("‡πÄ‡∏´‡∏á‡πà‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á‡∏á... ‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏™‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö!")
