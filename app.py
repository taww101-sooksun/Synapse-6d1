import streamlit as st
import time
import pandas as pd
import numpy as np

# ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏•‡∏±‡∏Å
st.title("üõ°Ô∏è MATRIX_V2: ‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ï‡∏£‡∏á")
st.write("‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏¥‡∏á‡∏°‡∏¥‡∏ï‡∏¥**")

# 1. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" (Reference Point)
target_lat = 14.728688  # ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á
target_lon = 100.680992

# 2. ‡∏î‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Real-time Clock)
current_time = time.time()
local_time = time.ctime(current_time)

# 3. ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏£‡∏´‡∏±‡∏™ 44 ‡∏à‡∏∏‡∏î (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ö‡∏£‡∏£‡∏à‡∏ö‡∏Å‡∏±‡∏ô)
gates = ['A: Stability', 'B: Filtering', 'C: Reflection', 'D: Equilibrium', 'E: Silence', 'F: Unity']
data = []

for i, gate in enumerate(gates):
    # ‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ "‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á" ‡πÅ‡∏•‡∏∞ "‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á" ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô
    g_plus = np.sin(current_time + target_lat + i) * 44
    s_minus = np.cos(current_time + target_lon + i) * 44
    sc_val = abs(g_plus + s_minus) / 7.33
    
    data.append({
        "‡∏î‡πà‡∏≤‡∏ô": gate,
        "G+ (‡∏à‡∏£‡∏¥‡∏á)": round(g_plus, 4),
        "S- (‡∏à‡∏£‡∏¥‡∏á)": round(s_minus, 4),
        "SC (‡∏™‡∏°‡∏î‡∏∏‡∏•)": round(sc_val, 4)
    })

# ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á
st.table(pd.DataFrame(data))
st.success(f"üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà: {target_lat}, {target_lon}")
st.info(f"üïí ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: {local_time}")

# ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏õ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á
time.sleep(1)
st.rerun()
